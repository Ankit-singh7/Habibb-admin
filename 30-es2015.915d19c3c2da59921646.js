(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"+hn0":function(e,t,c){"use strict";c.r(t);var i=c("ofXK"),a=c("3Pt+"),n=c("tyNb"),s=c("PSD3"),l=c.n(s),o=c("wd/R"),r=c("xgIS"),d=c("lJxs"),h=c("Kj3r"),b=c("/uUt"),u=c("fXoL"),m=c("sumL"),p=c("rwBg"),g=c("wZvz"),f=c("f4UJ"),v=c("AXIP"),M=c("oOf3");const y=["yourElement"],_=["yourNumber"],L=["closeEditModal"];function O(e,t){if(1&e&&(u.ac(0),u.cc(1,"option",29),u.Mc(2),u.bc(),u.Zb()),2&e){const e=t.$implicit;u.Jb(1),u.vc("value",e.id),u.Jb(1),u.Nc(e.name)}}function w(e,t){if(1&e&&(u.ac(0),u.cc(1,"option",29),u.Mc(2),u.bc(),u.Zb()),2&e){const e=t.$implicit;u.Jb(1),u.vc("value",e.id),u.Jb(1),u.Nc(e.name)}}function C(e,t){if(1&e&&(u.ac(0),u.cc(1,"option",29),u.Mc(2),u.bc(),u.Zb()),2&e){const e=t.$implicit;u.Jb(1),u.vc("value",e.id),u.Jb(1),u.Nc(e.name)}}function P(e,t){if(1&e){const e=u.dc();u.cc(0,"tr"),u.cc(1,"td"),u.Mc(2),u.bc(),u.cc(3,"td"),u.Mc(4),u.bc(),u.cc(5,"td"),u.Mc(6),u.bc(),u.cc(7,"td"),u.Mc(8),u.bc(),u.cc(9,"td"),u.cc(10,"button",30),u.kc("click",(function(){u.Fc(e);const c=t.$implicit;return u.oc(2).getBillDetail(c.bill_id)})),u.Xb(11,"i",31),u.bc(),u.bc(),u.bc()}if(2&e){const e=t.$implicit;u.Jb(2),u.Nc(e.customer_name),u.Jb(2),u.Oc("\u20b9 ",e.total_price,""),u.Jb(2),u.Nc(e.customer_phone),u.Jb(2),u.Nc(e.user_name)}}const B=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function S(e,t){if(1&e&&(u.cc(0,"tbody"),u.Kc(1,P,12,4,"tr",5),u.pc(2,"paginate"),u.bc()),2&e){const e=u.oc();u.Jb(1),u.vc("ngForOf",u.rc(2,1,e.billList,u.Ac(4,B,e.selectedPerPage,e.currentpage,e.totalPage)))}}function E(e,t){if(1&e&&(u.cc(0,"tbody"),u.cc(1,"tr"),u.cc(2,"td",32),u.Mc(3),u.bc(),u.bc(),u.bc()),2&e){const e=u.oc();u.Jb(3),u.Nc(e.response)}}function J(e,t){if(1&e&&(u.cc(0,"li"),u.Mc(1),u.pc(2,"titlecase"),u.bc()),2&e){const e=t.$implicit;u.Jb(1),u.Pc(" ",u.qc(2,2,e.name)," - Quantity: ",e.quantity," ")}}function D(e,t){if(1&e&&(u.cc(0,"div",39),u.cc(1,"p",37),u.Mc(2,"Products Used:"),u.bc(),u.cc(3,"ul"),u.Kc(4,J,3,4,"li",5),u.bc(),u.bc()),2&e){const e=u.oc().$implicit;u.Jb(4),u.vc("ngForOf",e.product_usage_detail)}}function N(e,t){if(1&e&&(u.ac(0),u.cc(1,"div",36),u.cc(2,"p"),u.Mc(3,"Service Name: "),u.cc(4,"span",37),u.Mc(5),u.pc(6,"titlecase"),u.bc(),u.bc(),u.cc(7,"p"),u.Mc(8,"Head Count: "),u.cc(9,"span",37),u.Mc(10),u.bc(),u.bc(),u.Kc(11,D,5,1,"div",38),u.bc(),u.Zb()),2&e){const e=t.$implicit;u.Jb(5),u.Nc(u.qc(6,3,e.service_name)),u.Jb(5),u.Nc(e.quantity),u.Jb(1),u.vc("ngIf",(null==e.product_usage_detail?null:e.product_usage_detail.length)>0)}}function k(e,t){if(1&e&&(u.cc(0,"div",33),u.cc(1,"div",34),u.cc(2,"div",16),u.cc(3,"h5",35),u.Mc(4,"Product Usage Detail"),u.bc(),u.bc(),u.Kc(5,N,12,5,"ng-container",5),u.bc(),u.bc()),2&e){const e=u.oc();u.Jb(5),u.vc("ngForOf",e.detail.services)}}const A=[{path:"",component:(()=>{class e{constructor(e,t,c,i,a,n,s){this.router=e,this.billService=t,this.userService=c,this.modeService=i,this.fb=a,this.branchService=n,this.ui=s,this.sortOrder=!1,this.selectAll=!1,this.LoadingText="abc",this.sortFields={total_price:!0,booking_amount:!0,payment_mode:!0,delivery_mode:!0,customer_name:!0,user_name:!0,createdOn:!0},this.payment=[],this.delivery=[],this.billList=[],this.response="No Data to Show",this.searchedName="",this.selectedDate="",this.userNameList=[],this.branchList=[],this.operatorList=[],this.employeeList=[],this.customerList=[],this.selectedPerPage=10,this.currentpage=1,this.getAllPaymentMode=()=>{this.modeService.getPaymentModeList().subscribe(e=>{if(e.data){this.payment.push({id:"Net Banking",name:"Net Banking"});let t=e.data.map(e=>({id:e.payment_mode_name,name:e.payment_mode_name}));this.payment=[...t,...this.payment],this.payment.push({id:"",name:"All"})}})},this.getAllOperator=()=>{this.userService.getAllOperator("",1e5,1).subscribe(e=>{if(e.data){let t=e.data.result.map(e=>({id:e.user_id,name:`${e.f_name} ${e.l_name}`}));this.operatorList=[{id:"",name:"All"},...t]}})},this.getAllEmployee=()=>{this.userService.getAllEmployee("status=Active",1e5,1).subscribe(e=>{if(e.data){let t=e.data.result.map(e=>({id:e.user_id,name:`${e.f_name} ${e.l_name}`}));this.employeeList=[{id:"",name:"All"},...t]}})},this.getAllBranch=()=>{this.branchService.getBranchList().subscribe(e=>{if(e.data){let t=e.data.map(e=>({id:e.branch_id,name:e.branch_name}));this.branchList=[{id:"",name:"All"},...t]}})},this.onLimitSelect=e=>{this.selectedPerPage=e,this.getBillList()}}ngOnInit(){this.getBillList(),this.getAllPaymentMode(),this.getAllOperator(),this.getAllBranch(),this.getAllEmployee()}onCustomerChange(){}ngAfterViewInit(){Object(r.a)(this.yourElement.nativeElement,"input").pipe(Object(d.a)(e=>e.target.value)).pipe(Object(h.a)(1e3)).pipe(Object(b.a)()).subscribe(e=>{this.searchedName=e.toLowerCase(),this.searchedName&&this.getCustomerList()})}addStatus(e){this.status=e}editStatus(e){this.detail.status=e}getBillList(e){e&&(this.currentpage=e);let t={startDate:o(this.selectedStartDate).format("DD-MM-YYYY"),endDate:o(this.selectedEndDate).format("DD-MM-YYYY"),payment_mode:this.selectedPaymentMode,branch_id:this.selectedBranchId,createdOn:this.selectedDate,user_id:this.selectedOperator,customer_name:this.searchedName,customer_phone:this.searchedNumber,employee_id:this.selectedEmployee},c="";for(let i in t)t[i]&&(c=`${c}${i}=${t[i]}&`);this.ui.loader.show(),this.billService.getBillingList(this.selectedPerPage,this.currentpage,c).subscribe(e=>{this.billList=[],e.data?(this.billList=e.data.result.map(e=>Object.assign({date:o(e.createdOn).format("YYYY-MM-DD")},e)),this.total=e.data.total.split("-")[0],e.data.result.length>0&&(this.totalPage=e.data.total.split("-")[1])):this.total=0,this.ui.loader.hide()},e=>this.ui.loader.hide())}getCustomerList(){this.billService.getCustomerList(this.searchedName).subscribe(e=>{this.customerList=[],e.data?(this.billList=e.data.result.map(e=>Object.assign({date:o(e.createdOn).format("YYYY-MM-DD")},e)),this.total=e.data.total.split("-")[0],e.data.result.length>0&&(this.totalPage=e.data.total.split("-")[1])):this.total=0})}onOptionSelect(e,t){"payment"===e?this.selectedPaymentMode=t:"branch"===e?this.selectedBranchId=t:"operator"===e?this.selectedOperator="ALL"===t?"":t:"employee"===e?this.selectedEmployee="ALL"===t?"":t:"date"===e&&(this.selectedDate=t),this.getBillList()}onDateSelect(){this.selectedStartDate?this.selectedEndDate?this.getBillList():l.a.fire({icon:"warning",title:"Please Select End Date",showConfirmButton:!1,timer:1500}):l.a.fire({icon:"warning",title:"Please Select Start Date",showConfirmButton:!1,timer:1500})}changedDate(e,t){"start"===e?this.selectedStartDate=t:"end"===e&&(this.selectedEndDate=t)}changeOrder(e){this.sortOrder=!this.sortOrder,this.field=e,this.sortFields[e]=this.sortOrder,this.billList.sort((t,c)=>"total_price"===e?this.sortOrder?c[e]-t[e]:t[e]-c[e]:this.sortOrder?c[e].localeCompare(t[e]):t[e].localeCompare(c[e]))}deleteBill(e,t){l.a.fire({title:"Do you want to delete this Bill?",showCancelButton:!0,confirmButtonText:"YES",cancelButtonText:"CANCEL"}).then(e=>{e.isConfirmed&&(this.ui.loader.show(),this.billService.deleteBill(t).subscribe(e=>{l.a.fire({icon:"success",title:"Bill Deleted Successfully",showConfirmButton:!1,timer:1500}),this.getBillList(),this.ui.loader.hide()},e=>this.ui.loader.hide()))})}getBillDetail(e){this.ui.loader.show(),this.billService.getBillDetail(e).subscribe(e=>{e.data&&(this.detail=e.data,this.ui.loader.hide())},e=>this.ui.loader.hide())}editBill(e){this.ui.loader.show(),delete this.detail.validationToken,delete this.detail.createdOn,this.billService.editBill(e,this.detail).subscribe(e=>{this.closeEditModal.nativeElement.click(),this.detail={},this.ui.loader.hide(),this.getBillList()},e=>{this.ui.loader.hide()})}}return e.\u0275fac=function(t){return new(t||e)(u.Wb(n.e),u.Wb(m.a),u.Wb(p.a),u.Wb(g.a),u.Wb(a.c),u.Wb(f.a),u.Wb(v.a))},e.\u0275cmp=u.Qb({type:e,selectors:[["app-product-usage-detail"]],viewQuery:function(e,t){var c;1&e&&(u.Rc(y,!0),u.Rc(_,!0),u.Rc(L,!0)),2&e&&(u.Cc(c=u.lc())&&(t.yourElement=c.first),u.Cc(c=u.lc())&&(t.yourNumber=c.first),u.Cc(c=u.lc())&&(t.closeEditModal=c.first))},decls:65,vars:23,consts:[[1,"container-fluid"],[1,"row","dash-tab"],[1,"col-sm-2","cus-srch"],[1,"form-group"],["name","dev","id","dev",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],["name","cars","id","cars",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["type","text","id","birthday","placeholder","Search By Cus Name","name","searchName",1,"form-control","pl-0",3,"ngModel","ngModelChange","keyup"],["yourElement",""],[1,"col-sm-12","col-md-3"],["name","pay","id","pay",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["value","10000"],[1,"col-sm-12"],[1,"table-responsive","scrollmenu"],[1,"table","details_table"],["scope","col"],["href","javascript:void(0)",1,"caret-sort",3,"click"],[1,"fa"],[4,"ngIf","ngIfElse"],["elseBlock",""],[2,"text-align","center",3,"pageChange"],["id","viewModal","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","fade"],["viewModal",""],[1,"modal-dialog"],["class","modal-content","style","padding: 2%",4,"ngIf"],[3,"value"],["type","button","data-toggle","modal","data-target","#viewModal",1,"btn","btn-success","btn-sm",2,"margin-left","4px",3,"click"],[1,"fa","fa-eye"],["colspan","100%",1,"text-center"],[1,"modal-content",2,"padding","2%"],[1,"row"],[2,"text-align","center"],[1,"col-sm-6",2,"border","1px solid gray","padding","5px","margin-bottom","10px"],[2,"font-weight","bold"],["style","margin-top: 10px; padding-left: 10px; border-top: 1px dashed gray;",4,"ngIf"],[2,"margin-top","10px","padding-left","10px","border-top","1px dashed gray"]],template:function(e,t){if(1&e&&(u.cc(0,"div",0),u.cc(1,"div",1),u.cc(2,"div",2),u.cc(3,"div",3),u.Mc(4," BRANCH WISE "),u.cc(5,"select",4),u.kc("ngModelChange",(function(e){return t.selectedBranchId=e}))("change",(function(e){return t.onOptionSelect("branch",e.target.value)})),u.Kc(6,O,3,2,"ng-container",5),u.bc(),u.bc(),u.bc(),u.cc(7,"div",2),u.cc(8,"div",3),u.Mc(9," EMPLOYEE WISE "),u.cc(10,"select",6),u.kc("ngModelChange",(function(e){return t.selectedEmployee=e}))("change",(function(e){return t.onOptionSelect("employee",e.target.value)})),u.Kc(11,w,3,2,"ng-container",5),u.bc(),u.bc(),u.bc(),u.cc(12,"div",2),u.cc(13,"div",3),u.Mc(14," BILL BY "),u.cc(15,"select",6),u.kc("ngModelChange",(function(e){return t.selectedOperator=e}))("change",(function(e){return t.onOptionSelect("operator",e.target.value)})),u.Kc(16,C,3,2,"ng-container",5),u.bc(),u.bc(),u.bc(),u.cc(17,"div",2),u.cc(18,"div",3),u.Mc(19," SEARCH BY NAME "),u.cc(20,"input",7,8),u.kc("ngModelChange",(function(e){return t.searchedName=e}))("keyup",(function(){return t.onCustomerChange()})),u.bc(),u.bc(),u.bc(),u.cc(22,"div",9),u.cc(23,"div",3),u.Mc(24," SELECT PER PAGE "),u.cc(25,"select",10),u.kc("ngModelChange",(function(e){return t.selectedPerPage=e}))("change",(function(e){return t.onLimitSelect(e.target.value)})),u.cc(26,"option",11),u.Mc(27,"10"),u.bc(),u.cc(28,"option",12),u.Mc(29,"25"),u.bc(),u.cc(30,"option",13),u.Mc(31,"50"),u.bc(),u.cc(32,"option",14),u.Mc(33,"100"),u.bc(),u.cc(34,"option",15),u.Mc(35,"Show All"),u.bc(),u.bc(),u.bc(),u.bc(),u.cc(36,"div",16),u.cc(37,"div",17),u.cc(38,"table",18),u.cc(39,"thead"),u.cc(40,"tr"),u.cc(41,"th",19),u.Mc(42,"Customer "),u.cc(43,"a",20),u.kc("click",(function(){return t.changeOrder("customer_name")})),u.Xb(44,"i",21),u.bc(),u.bc(),u.cc(45,"th",19),u.Mc(46,"Total Price "),u.cc(47,"a",20),u.kc("click",(function(){return t.changeOrder("total_price")})),u.Xb(48,"i",21),u.bc(),u.bc(),u.cc(49,"th",19),u.Mc(50,"Phone"),u.bc(),u.cc(51,"th",19),u.Mc(52,"Bill By "),u.cc(53,"a",20),u.kc("click",(function(){return t.changeOrder("user_name")})),u.Xb(54,"i",21),u.bc(),u.bc(),u.cc(55,"th",19),u.Mc(56,"View Product Usage Detail"),u.bc(),u.bc(),u.bc(),u.Kc(57,S,3,8,"tbody",22),u.Kc(58,E,4,1,"ng-template",null,23,u.Lc),u.bc(),u.cc(60,"pagination-controls",24),u.kc("pageChange",(function(e){return t.getBillList(e)})),u.bc(),u.bc(),u.bc(),u.bc(),u.bc(),u.cc(61,"div",25,26),u.cc(63,"div",27),u.Kc(64,k,6,1,"div",28),u.bc(),u.bc()),2&e){const e=u.Dc(59);u.Jb(5),u.vc("ngModel",t.selectedBranchId),u.Jb(1),u.vc("ngForOf",t.branchList),u.Jb(4),u.vc("ngModel",t.selectedEmployee),u.Jb(1),u.vc("ngForOf",t.employeeList),u.Jb(4),u.vc("ngModel",t.selectedOperator),u.Jb(1),u.vc("ngForOf",t.operatorList),u.Jb(4),u.vc("ngModel",t.searchedName),u.Jb(5),u.vc("ngModel",t.selectedPerPage),u.Jb(19),u.Nb("fa-caret-down",t.sortFields.customer_name)("fa-caret-up",!t.sortFields.customer_name),u.Jb(4),u.Nb("fa-caret-down",t.sortFields.total_price)("fa-caret-up",!t.sortFields.total_price),u.Jb(6),u.Nb("fa-caret-down",t.sortFields.user_name)("fa-caret-up",!t.sortFields.user_name),u.Jb(3),u.vc("ngIf",null==t.billList?null:t.billList.length)("ngIfElse",e),u.Jb(7),u.vc("ngIf",t.detail)}},directives:[a.p,a.h,a.k,i.k,a.b,a.l,a.r,i.l,M.c],pipes:[M.b,i.r],styles:["[_ngcontent-%COMP%]::-webkit-datetime-edit{padding:1em}[_ngcontent-%COMP%]::-webkit-datetime-edit-text{padding:0 .3em}[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{color:green}div.scrollmenu[_ngcontent-%COMP%]{overflow:auto;white-space:nowrap}div.scrollmenu[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{text-align:center;padding:14px;text-decoration:none}"]}),e})()}];let x=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},imports:[[n.h.forChild(A)],n.h]}),e})();var I=c("wloI"),Y=c("YUSg"),F=c("i2NW"),$=c("X+I5");c.d(t,"ProductUsageDetailModule",(function(){return K}));let K=(()=>{class e{}return e.\u0275mod=u.Ub({type:e}),e.\u0275inj=u.Tb({factory:function(t){return new(t||e)},providers:[$.a],imports:[[i.b,a.d,a.n,x,Y.a,Y.b,F.a,I.a,M.a]]}),e})()}}]);