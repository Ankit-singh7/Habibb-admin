function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,c=function(){};return{s:c,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"/Vdb":function(e,t,r){"use strict";r.r(t);var n=r("ofXK"),c=r("tyNb"),o=r("wd/R"),a=r("PSD3"),i=r.n(a),l=r("fXoL"),s=r("nwg1"),u=r("rwBg"),d=r("f4UJ"),f=r("sumL"),h=r("AXIP"),b=r("3Pt+"),p=r("X+I5"),v=["closeEditModal"];function g(e,t){if(1&e&&(l.ac(0),l.cc(1,"option",23),l.Mc(2),l.bc(),l.Zb()),2&e){var r=t.$implicit;l.Jb(1),l.vc("value",r.id),l.Jb(1),l.Nc(r.name)}}function y(e,t){if(1&e&&(l.ac(0),l.cc(1,"option",23),l.Mc(2),l.bc(),l.Zb()),2&e){var r=t.$implicit;l.Jb(1),l.vc("value",r.id),l.Jb(1),l.Nc(r.name)}}function m(e,t){if(1&e&&(l.ac(0),l.cc(1,"td"),l.cc(2,"B"),l.Mc(3),l.pc(4,"titlecase"),l.bc(),l.bc(),l.cc(5,"td"),l.Mc(6),l.bc(),l.Zb()),2&e){var r=l.oc().$implicit;l.Jb(3),l.Nc(l.qc(4,2,null==r?null:r.service_name)),l.Jb(3),l.Nc(null==r?null:r.quantity)}}function S(e,t){if(1&e&&(l.cc(0,"tr"),l.Kc(1,m,7,4,"ng-container",25),l.bc()),2&e){var r=t.$implicit;l.Jb(1),l.vc("ngIf",(null==r?null:r.quantity)>0)}}function _(e,t){if(1&e&&(l.cc(0,"tbody",24),l.Kc(1,S,2,1,"tr",5),l.pc(2,"filter"),l.bc()),2&e){var r=l.oc();l.Jb(1),l.vc("ngForOf",l.sc(2,1,r.reportList,"service_name",r.servS))}}function M(e,t){if(1&e&&(l.cc(0,"tbody"),l.cc(1,"tr"),l.cc(2,"td",26),l.Mc(3),l.bc(),l.bc(),l.bc()),2&e){var r=l.oc();l.Jb(3),l.Nc(r.response)}}var A,C,w=[{path:"",component:(A=function(){function e(t,r,n,c,o,a){var i=this;_classCallCheck(this,e),this.router=t,this.salesService=r,this.userService=n,this.branchService=c,this.billingService=o,this.ui=a,this.name=[],this.sortOrder=!1,this.sortFields={quantity:!0,food_name:!0},this.reportList=[],this.employeeList=[],this.branchList=[],this.response="No Data to Show",this.selectedPerPage=1e7,this.currentpage=1,this.servS="",this.getAllEmployee=function(){i.userService.getAllEmployee().subscribe((function(e){if(e.data){var t=e.data.result.map((function(e){return{id:e.user_id,name:"".concat(e.f_name," ").concat(e.l_name)}}));i.employeeList=[{id:"",name:"All"}].concat(_toConsumableArray(t))}}))},this.getAllBranch=function(){i.branchService.getBranchList().subscribe((function(e){if(e.data){var t=e.data.map((function(e){return{id:e.branch_id,name:e.branch_name}}));i.branchList=[{id:"",name:"All"}].concat(_toConsumableArray(t))}}))},this.onLimitSelect=function(e){i.selectedPerPage=e,i.getAllReport()},this.logout=function(){localStorage.setItem("isLoggedIn",String(!1)),i.router.navigate(["/login"])}}return _createClass(e,[{key:"ngOnInit",value:function(){this.getAllReport(),this.getAllBranch(),this.getAllEmployee()}},{key:"onOptionSelect",value:function(e,t){"branch"===e?"ALL"===t?this.selectedEmployee="":this.selectedBranchId=t:"employee"===e&&(this.selectedEmployee="ALL"===t?"":t),this.getAllReport()}},{key:"getAllReport",value:function(){var e=this,t={startDate:o(this.selectedStartDate).format("DD-MM-YYYY"),endDate:o(this.selectedEndDate).format("DD-MM-YYYY"),branch_id:this.selectedBranchId,employee_id:this.selectedEmployee},r="";for(var n in t)t[n]&&(r="".concat(r).concat(n,"=").concat(t[n],"&"));this.ui.loader.show(),this.billingService.getBillingList(this.selectedPerPage,this.currentpage,r).subscribe((function(t){var r,n;e.reportList=[],(null===(n=null===(r=t)||void 0===r?void 0:r.data)||void 0===n?void 0:n.result)&&function(){var r,n=JSON.parse(JSON.stringify(t.data.result)),c=[],o=_createForOfIteratorHelper(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.services.length>0){var i,l=_createForOfIteratorHelper(a.services);try{for(l.s();!(i=l.n()).done;){var s=i.value;c.push(s)}}catch(f){l.e(f)}finally{l.f()}}}}catch(f){o.e(f)}finally{o.f()}for(var u=function(t){var r=c.filter((function(e){var r,n;return(null===(r=e)||void 0===r?void 0:r.service_id)===(null===(n=c[t])||void 0===n?void 0:n.service_id)}));if(console.log(r),r.length>1){for(var n=JSON.parse(JSON.stringify(r[0])),o=0,a=0;a<r.length;a++)o+=r[a].quantity;n.quantity=o,e.reportList.some((function(e){return e.service_id===n.service_id}))||e.reportList.push(Object.assign({},n))}else e.reportList.push(r[0])},d=0;d<c.length;d++)u(d);console.log(e.reportList)}(),e.ui.loader.hide()}),(function(t){e.ui.loader.hide()}))}},{key:"onDateSelect",value:function(){this.selectedStartDate?this.selectedEndDate?this.getAllReport():i.a.fire({icon:"warning",title:"Please Select End Date",showConfirmButton:!1,timer:1500}):i.a.fire({icon:"warning",title:"Please Select Start Date",showConfirmButton:!1,timer:1500})}},{key:"changeOrder",value:function(e){var t=this;this.sortOrder=!this.sortOrder,this.field=e,this.sortFields[e]=this.sortOrder,this.reportList.sort((function(r,n){return"quantity"===e||"quantity"===e?t.sortOrder?n[e]-r[e]:r[e]-n[e]:t.sortOrder?n[e].localeCompare(r[e]):r[e].localeCompare(n[e])}))}},{key:"changedDate",value:function(e,t){"start"===e?this.selectedStartDate=t:"end"===e&&(this.selectedEndDate=t),console.log(this.selectedStartDate),console.log(this.selectedEndDate)}}]),e}(),A.\u0275fac=function(e){return new(e||A)(l.Wb(c.e),l.Wb(s.a),l.Wb(u.a),l.Wb(d.a),l.Wb(f.a),l.Wb(h.a))},A.\u0275cmp=l.Qb({type:A,selectors:[["app-service-sales-report"]],viewQuery:function(e,t){var r;1&e&&l.Rc(v,!0),2&e&&l.Cc(r=l.lc())&&(t.closeEditModal=r.first)},decls:45,vars:17,consts:[[1,"container-fluid"],[1,"row","dash-tab"],[1,"col-sm-5","cus-srch"],[1,"form-group"],["name","dev","id","dev",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],["name","cars","id","cars",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[1,"col-sm-3","cus-srch"],["type","date","id","birthday1","placeholder","From Date","name","selectedSDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["type","date","id","birthday2","placeholder","To Date","name","selectedEDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[1,"col-sm-3"],[1,"form-group","mt-3"],[1,"shortcut-btn","w-100",3,"click"],[1,"col-sm-12","col-md-3","cus-srch"],["type","text","id","birthday","placeholder","Search By SERVICE","name","servS",1,"form-control","pl-0",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","details_table"],["scope","col"],["href","javascript:void(0)",1,"caret-sort",3,"click"],[1,"fa"],["style","width:100%",4,"ngIf","ngIfElse"],["elseBlock",""],[3,"value"],[2,"width","100%"],[4,"ngIf"],["colspan","100%",1,"text-center"]],template:function(e,t){if(1&e&&(l.cc(0,"div",0),l.cc(1,"div",1),l.cc(2,"div",2),l.cc(3,"div",3),l.Mc(4," BRANCH WISE "),l.cc(5,"select",4),l.kc("ngModelChange",(function(e){return t.selectedBranchId=e}))("change",(function(e){return t.onOptionSelect("branch",e.target.value)})),l.Kc(6,g,3,2,"ng-container",5),l.bc(),l.bc(),l.bc(),l.cc(7,"div",2),l.cc(8,"div",3),l.Mc(9," EMPLOYEE WISE "),l.cc(10,"select",6),l.kc("ngModelChange",(function(e){return t.selectedEmployee=e}))("change",(function(e){return t.onOptionSelect("employee",e.target.value)})),l.Kc(11,y,3,2,"ng-container",5),l.bc(),l.bc(),l.bc(),l.cc(12,"div",7),l.cc(13,"div",3),l.Mc(14," FROM DATE "),l.cc(15,"input",8),l.kc("ngModelChange",(function(e){return t.selectedStartDate=e}))("change",(function(e){return t.changedDate("start",e.target.value)})),l.bc(),l.bc(),l.bc(),l.cc(16,"div",7),l.cc(17,"div",3),l.Mc(18," TO DATE "),l.cc(19,"input",9),l.kc("ngModelChange",(function(e){return t.selectedEndDate=e}))("change",(function(e){return t.changedDate("end",e.target.value)})),l.bc(),l.bc(),l.bc(),l.cc(20,"div",10),l.cc(21,"div",11),l.cc(22,"button",12),l.kc("click",(function(){return t.onDateSelect()})),l.cc(23,"b"),l.Mc(24,"SEARCH"),l.bc(),l.bc(),l.bc(),l.bc(),l.cc(25,"div",13),l.cc(26,"div",3),l.Mc(27," SEARCH BY SERVICE "),l.cc(28,"input",14),l.kc("ngModelChange",(function(e){return t.servS=e})),l.bc(),l.bc(),l.bc(),l.cc(29,"div",15),l.cc(30,"div",16),l.cc(31,"table",17),l.cc(32,"thead"),l.cc(33,"tr"),l.cc(34,"th",18),l.Mc(35,"Service Name"),l.cc(36,"a",19),l.kc("click",(function(){return t.changeOrder("food_name")})),l.Xb(37,"i",20),l.bc(),l.bc(),l.cc(38,"th",18),l.Mc(39,"Head Count"),l.cc(40,"a",19),l.kc("click",(function(){return t.changeOrder("quantity")})),l.Xb(41,"i",20),l.bc(),l.bc(),l.bc(),l.bc(),l.Kc(42,_,3,5,"tbody",21),l.Kc(43,M,4,1,"ng-template",null,22,l.Lc),l.bc(),l.bc(),l.bc(),l.bc(),l.bc()),2&e){var r=l.Dc(44);l.Jb(5),l.vc("ngModel",t.selectedBranchId),l.Jb(1),l.vc("ngForOf",t.branchList),l.Jb(4),l.vc("ngModel",t.selectedEmployee),l.Jb(1),l.vc("ngForOf",t.employeeList),l.Jb(4),l.vc("ngModel",t.selectedStartDate),l.Jb(4),l.vc("ngModel",t.selectedEndDate),l.Jb(9),l.vc("ngModel",t.servS),l.Jb(9),l.Nb("fa-caret-down",t.sortFields.food_name)("fa-caret-up",!t.sortFields.food_name),l.Jb(4),l.Nb("fa-caret-down",t.sortFields.quantity)("fa-caret-up",!t.sortFields.quantity),l.Jb(1),l.vc("ngIf",null==t.reportList?null:t.reportList.length)("ngIfElse",r)}},directives:[b.p,b.h,b.k,n.k,b.b,n.l,b.l,b.r],pipes:[p.a,n.r],styles:[""]}),A)}],E=((C=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ub({type:C}),C.\u0275inj=l.Tb({factory:function(e){return new(e||C)},imports:[[c.h.forChild(w)],c.h]}),C),D=r("wloI");r.d(t,"ServiceSalesReportModule",(function(){return I}));var k,I=((k=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ub({type:k}),k.\u0275inj=l.Tb({factory:function(e){return new(e||k)},imports:[[n.b,b.d,E,D.a]]}),k)}}]);