(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"2WZm":function(t,e,c){"use strict";c.r(e);var s=c("ofXK"),r=c("3Pt+"),a=c("tyNb"),n=c("wd/R"),i=c("fXoL"),o=c("AytR"),l=c("tk/3");let d=(()=>{class t{constructor(t){this.http=t}getSessionList(t,e,c){return this.http.get(`${o.a.apiURL}/session/view/all?per_page=${t}&current_page=${e}&${c}`)}}return t.\u0275fac=function(e){return new(e||t)(i.gc(l.a))},t.\u0275prov=i.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=c("sumL"),h=c("rwBg"),p=c("AXIP"),g=c("oOf3");const b=["closeEditModal"];function f(t,e){if(1&t&&(i.ac(0),i.cc(1,"option",24),i.Mc(2),i.bc(),i.Zb()),2&t){const t=e.$implicit;i.Jb(1),i.vc("value",t.name),i.Jb(1),i.Nc(t.name)}}function m(t,e){if(1&t&&(i.cc(0,"tr"),i.cc(1,"td"),i.cc(2,"B"),i.Mc(3),i.pc(4,"date"),i.bc(),i.bc(),i.cc(5,"td"),i.Mc(6),i.bc(),i.cc(7,"td"),i.Mc(8),i.bc(),i.cc(9,"td"),i.Mc(10),i.bc(),i.cc(11,"td"),i.Mc(12),i.bc(),i.bc()),2&t){const t=e.$implicit;i.Jb(3),i.Nc(i.rc(4,5,t.createdOn,"MMM d, y, h:mm:ss a")),i.Jb(3),i.Nc(t.user_name),i.Jb(2),i.Oc("\u20b9 ",t.session_amount,""),i.Jb(2),i.Oc("\u20b9 ",t.drawer_balance,""),i.Jb(2),i.Oc("\u20b9 ",t.withdrawn,"")}}const v=function(t,e,c){return{itemsPerPage:t,currentPage:e,totalItems:c}};function w(t,e){if(1&t&&(i.cc(0,"tbody",25),i.Kc(1,m,13,8,"tr",7),i.pc(2,"paginate"),i.bc()),2&t){const t=i.oc();i.Jb(1),i.vc("ngForOf",i.rc(2,1,t.sessionList,i.Ac(4,v,t.selectedPerPage,t.currentpage,t.totalPage)))}}function M(t,e){if(1&t&&(i.cc(0,"tbody"),i.cc(1,"tr"),i.cc(2,"td",26),i.Mc(3),i.bc(),i.bc(),i.bc()),2&t){const t=i.oc();i.Jb(3),i.Nc(t.response)}}const L=[{path:"",component:(()=>{class t{constructor(t,e,c,s,r){this.router=t,this.sessionService=e,this.billService=c,this.userService=s,this.ui=r,this.name=[],this.sortOrder=!1,this.sortFields={user_name:!0,session_amount:!0,drawer_balance:!0,withdrawn:!0},this.fullName=localStorage.getItem("name"),this.sessionList=[],this.response="No Data to Show",this.userNameList=[],this.selectedPerPage=10,this.currentpage=1,this.getAllOperator=()=>{this.userService.getAllOperator().subscribe(t=>{if(t.data){let e=t.data.result.map(t=>({id:t.user_id,name:`${t.f_name} ${t.l_name}`}));this.userNameList=[{id:"",name:"All"},...e]}})},this.getTotalSales=()=>{let t={startDate:n(new Date).format("DD-MM-YYYY"),endDate:n(new Date).format("DD-MM-YYYY")},e="";for(let c in t)t[c]&&(e=`${e}${c}=${t[c]}&`);console.log(e),this.billService.getTotalSale(e).subscribe(t=>{if(t.data){let e=t.data;this.total=0;for(let t of e)this.total=this.total+t.total;console.log(this.total)}else this.total=0})},this.onLimitSelect=t=>{this.selectedPerPage=t,this.getSessionList()},this.logout=()=>{localStorage.setItem("isLoggedIn",String(!1)),this.router.navigate(["/login"])}}ngOnInit(){this.getSessionList(),this.getAllOperator(),this.getTotalSales()}addStatus(t){this.status=t,console.log(this.status)}editStatus(t){this.detail.status=t,console.log(this.status)}getSessionList(t){t&&(this.currentpage=t);let e={createdOn:this.selectedDate,user_name:this.selectedUserName},c="";for(let s in e)e[s]&&(c=`${c}${s}=${e[s]}&`);console.log(c),this.ui.loader.show(),this.sessionService.getSessionList(this.selectedPerPage,this.currentpage,c).subscribe(t=>{var e;if(t.data)if(this.sessionList=t.data.result.map(t=>Object.assign({date:n(t.createdOn).format("YYYY-MM-DD")},t)),this.totalPage=t.data.total,null===(e=t.data)||void 0===e?void 0:e.result){this.total=0;for(let e of t.data.result)this.total=this.total+e.drawer_balance}else this.total=0;this.ui.loader.hide()},t=>this.ui.loader.hide())}onOptionSelect(t,e){"user"===t?this.selectedUserName="All"===e?"":e:"date"===t&&(this.selectedDate=e),this.getSessionList()}changeOrder(t){this.sortOrder=!this.sortOrder,this.field=t,this.sortFields[t]=this.sortOrder,this.sessionList.sort((e,c)=>"withdrawn"===t||"session_amount"===t||"drawer_balance"===t?this.sortOrder?c[t]-e[t]:e[t]-c[t]:this.sortOrder?c[t].localeCompare(e[t]):e[t].localeCompare(c[t]))}onUserSelect(t){this.selectedUserName=t,"CLEAR SEARCH"===this.selectedUserName&&(this.selectedUserName="")}changedDate(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(a.e),i.Wb(d),i.Wb(u.a),i.Wb(h.a),i.Wb(p.a))},t.\u0275cmp=i.Qb({type:t,selectors:[["app-session"]],viewQuery:function(t,e){var c;1&t&&i.Rc(b,!0),2&t&&i.Cc(c=i.lc())&&(e.closeEditModal=c.first)},decls:56,vars:23,consts:[[1,"container-fluid"],[1,"row","dash-tab"],[1,"col-sm-12"],[1,"form-group"],[2,"color","#69d73d"],[1,"col-sm-2","cus-srch"],["name","cars","id","cars",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[1,"col-sm-3","cus-srch"],["type","date","id","birthday","placeholder","select Date","name","selectedDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[1,"offset-md-5","col-sm-2","cus-srch"],["name","pay","id","pay",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"table-responsive"],[1,"table","details_table"],["scope","col"],["href","javascript:void(0)",1,"caret-sort",3,"click"],[1,"fa"],["style","width:100%",4,"ngIf","ngIfElse"],["elseBlock",""],[2,"text-align","center",3,"pageChange"],[3,"value"],[2,"width","100%"],["colspan","100%",1,"text-center"]],template:function(t,e){if(1&t&&(i.cc(0,"div",0),i.cc(1,"div",1),i.cc(2,"div",2),i.cc(3,"div",3),i.cc(4,"h4"),i.Mc(5,"TOTAL SALES : \u20b9 "),i.cc(6,"span",4),i.Mc(7),i.bc(),i.bc(),i.bc(),i.bc(),i.cc(8,"div",5),i.cc(9,"div",3),i.Mc(10," SESSION CREATED BY "),i.cc(11,"select",6),i.kc("ngModelChange",(function(t){return e.selectedUserName=t}))("change",(function(t){return e.onOptionSelect("user",t.target.value)})),i.Kc(12,f,3,2,"ng-container",7),i.bc(),i.bc(),i.bc(),i.cc(13,"div",8),i.cc(14,"div",3),i.Mc(15," SEARCH BY DATE "),i.cc(16,"input",9),i.kc("ngModelChange",(function(t){return e.selectedDate=t}))("change",(function(t){return e.onOptionSelect("date",t.target.value)})),i.bc(),i.bc(),i.bc(),i.cc(17,"div",10),i.cc(18,"div",3),i.Mc(19," SELECT PER PAGE "),i.cc(20,"select",11),i.kc("ngModelChange",(function(t){return e.selectedPerPage=t}))("change",(function(t){return e.onLimitSelect(t.target.value)})),i.cc(21,"option",12),i.Mc(22,"10"),i.bc(),i.cc(23,"option",13),i.Mc(24,"25"),i.bc(),i.cc(25,"option",14),i.Mc(26,"50"),i.bc(),i.cc(27,"option",15),i.Mc(28,"100"),i.bc(),i.bc(),i.bc(),i.bc(),i.cc(29,"div",2),i.cc(30,"div",16),i.cc(31,"table",17),i.cc(32,"thead"),i.cc(33,"tr"),i.cc(34,"th",18),i.Mc(35,"Date"),i.bc(),i.cc(36,"th",18),i.Mc(37,"User Name "),i.cc(38,"a",19),i.kc("click",(function(){return e.changeOrder("user_name")})),i.Xb(39,"i",20),i.bc(),i.bc(),i.cc(40,"th",18),i.Mc(41,"Open Balance "),i.cc(42,"a",19),i.kc("click",(function(){return e.changeOrder("session_amount")})),i.Xb(43,"i",20),i.bc(),i.bc(),i.cc(44,"th",18),i.Mc(45,"Closing Balance "),i.cc(46,"a",19),i.kc("click",(function(){return e.changeOrder("drawer_balance")})),i.Xb(47,"i",20),i.bc(),i.bc(),i.cc(48,"th",18),i.Mc(49,"Withraw "),i.cc(50,"a",19),i.kc("click",(function(){return e.changeOrder("withdrawn")})),i.Xb(51,"i",20),i.bc(),i.bc(),i.bc(),i.bc(),i.Kc(52,w,3,8,"tbody",21),i.Kc(53,M,4,1,"ng-template",null,22,i.Lc),i.bc(),i.cc(55,"pagination-controls",23),i.kc("pageChange",(function(t){return e.getSessionList(t)})),i.bc(),i.bc(),i.bc(),i.bc(),i.bc()),2&t){const t=i.Dc(54);i.Jb(7),i.Oc("",e.total,".00"),i.Jb(4),i.vc("ngModel",e.selectedUserName),i.Jb(1),i.vc("ngForOf",e.userNameList),i.Jb(4),i.vc("ngModel",e.selectedDate),i.Jb(4),i.vc("ngModel",e.selectedPerPage),i.Jb(19),i.Nb("fa-caret-down",e.sortFields.user_name)("fa-caret-up",!e.sortFields.user_name),i.Jb(4),i.Nb("fa-caret-down",e.sortFields.session_amount)("fa-caret-up",!e.sortFields.session_amount),i.Jb(4),i.Nb("fa-caret-down",e.sortFields.drawer_balance)("fa-caret-up",!e.sortFields.drawer_balance),i.Jb(4),i.Nb("fa-caret-down",e.sortFields.withdrawn)("fa-caret-up",!e.sortFields.withdrawn),i.Jb(1),i.vc("ngIf",null==e.sessionList?null:e.sessionList.length)("ngIfElse",t)}},directives:[r.p,r.h,r.k,s.k,r.b,r.l,r.r,s.l,g.c],pipes:[g.b,s.d],styles:["[_ngcontent-%COMP%]::-webkit-datetime-edit{padding:1em}[_ngcontent-%COMP%]::-webkit-datetime-edit-text{padding:0 .3em}[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{color:green}div.scrollmenu[_ngcontent-%COMP%]{overflow:auto;white-space:nowrap}div.scrollmenu[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:inline-block;text-align:center;padding:14px;text-decoration:none;width:100%!important}"]}),t})()}];let $=(()=>{class t{}return t.\u0275mod=i.Ub({type:t}),t.\u0275inj=i.Tb({factory:function(e){return new(e||t)},imports:[[a.h.forChild(L)],a.h]}),t})();var O=c("wloI"),_=c("X+I5");c.d(e,"SessionModule",(function(){return S}));let S=(()=>{class t{}return t.\u0275mod=i.Ub({type:t}),t.\u0275inj=i.Tb({factory:function(e){return new(e||t)},providers:[_.a],imports:[[s.b,r.d,$,O.a,g.a]]}),t})()},"X+I5":function(t,e,c){"use strict";c.d(e,"a",(function(){return r}));var s=c("fXoL");let r=(()=>{class t{transform(t,e,c){return c?t.filter(t=>e.split(",").some(e=>t.hasOwnProperty(e)&&new RegExp(c,"gi").test(t[e]))):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Vb({name:"filter",type:t,pure:!0}),t})()},rwBg:function(t,e,c){"use strict";c.d(e,"a",(function(){return n}));var s=c("AytR"),r=c("fXoL"),a=c("tk/3");let n=(()=>{class t{constructor(t){this.http=t}login(t){return this.http.post(`${s.a.apiURL}/user/login`,t)}changePassword(t){return this.http.post(`${s.a.apiURL}/admin/forgotPassword`,t)}getAllEmployee(t){return this.http.get(`${s.a.apiURL}/user/e?per_page=500&current_page=1&${t||""}`)}getAllOperator(t){return this.http.get(`${s.a.apiURL}/user/o?per_page=500&current_page=1&${t||""}`)}addEmployee(t){return this.http.post(`${s.a.apiURL}/user`,t)}addOperator(t){return this.http.post(`${s.a.apiURL}/user`,t)}editUser(t,e){return this.http.put(`${s.a.apiURL}/user/${t}`,e)}deleteUser(t){return this.http.delete(`${s.a.apiURL}/user/${t}`)}getUserDetail(t){return this.http.get(`${s.a.apiURL}/user/${t}`)}getAllUsers(t,e){return this.http.get(`${s.a.apiURL}/users/view/all?per_page=${t}&current_page=${e}`)}}return t.\u0275fac=function(e){return new(e||t)(r.gc(a.a))},t.\u0275prov=r.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},sumL:function(t,e,c){"use strict";c.d(e,"a",(function(){return n}));var s=c("AytR"),r=c("fXoL"),a=c("tk/3");let n=(()=>{class t{constructor(t){this.http=t}getBillingList(t,e,c){return this.http.get(`${s.a.apiURL}/bill/view/all?per_page=${t}&current_page=${e}&${c}`)}getCustomerList(t){return this.http.get(`${s.a.apiURL}/bill/customer?customer_name=${t}`)}getNumberList(t){return this.http.get(`${s.a.apiURL}/bill/number?customer_phone=${t}`)}deleteBill(t){return this.http.delete(`${s.a.apiURL}/bill/${t}`)}editBill(t,e){return this.http.put(`${s.a.apiURL}/bill/${t}/update`,e)}getBillDetail(t){return this.http.get(`${s.a.apiURL}/bill/${t}/getById`)}getTotalSale(t){return this.http.get(`${s.a.apiURL}/bill/total?${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.gc(a.a))},t.\u0275prov=r.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);