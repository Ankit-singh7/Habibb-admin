(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{sUg5:function(t,e,c){"use strict";c.r(e);var r=c("ofXK"),n=c("tyNb"),i=c("wd/R"),o=c("PSD3"),a=c.n(o),s=c("fXoL"),l=c("pVIR"),d=c("AXIP"),g=c("3Pt+"),b=c("oOf3");const u=["closeEditModal"];function h(t,e){if(1&t&&(s.cc(0,"tr"),s.cc(1,"td"),s.cc(2,"B"),s.Mc(3),s.pc(4,"titlecase"),s.bc(),s.bc(),s.cc(5,"td"),s.Mc(6),s.pc(7,"titlecase"),s.bc(),s.cc(8,"td"),s.Mc(9),s.bc(),s.cc(10,"td"),s.Mc(11),s.bc(),s.bc()),2&t){const t=e.$implicit;s.Jb(3),s.Nc(s.qc(4,6,t.ingredient)),s.Jb(3),s.Nc(s.qc(7,8,t.category)),s.Jb(3),s.Pc("",t.quantity_by_stock,"(",t.unit,")"),s.Jb(2),s.Pc("",t.quantity_by_order,"(",t.unit,")")}}const p=function(t,e,c){return{itemsPerPage:t,currentPage:e,totalItems:c}};function f(t,e){if(1&t&&(s.cc(0,"tbody",24),s.Kc(1,h,12,10,"tr",25),s.pc(2,"paginate"),s.bc()),2&t){const t=s.oc();s.Jb(1),s.vc("ngForOf",s.rc(2,1,t.reportList,s.Ac(4,p,t.selectedPerPage,t.currentpage,t.totalPage)))}}function y(t,e){if(1&t&&(s.cc(0,"tbody"),s.cc(1,"tr"),s.cc(2,"td",26),s.Mc(3),s.bc(),s.bc(),s.bc()),2&t){const t=s.oc();s.Jb(3),s.Nc(t.response)}}const m=[{path:"",component:(()=>{class t{constructor(t,e,c){this.router=t,this.foodService=e,this.ui=c,this.name=[],this.sortOrder=!1,this.sortFields={ingredient:!0,category:!0,quantity_by_stock:!0,quantity_by_order:!0},this.reportList=[],this.response="No Data to Show",this.selectedPerPage=10,this.currentpage=1,this.onLimitSelect=t=>{this.selectedPerPage=t,this.getAllReport()},this.logout=()=>{localStorage.setItem("isLoggedIn",String(!1)),this.router.navigate(["/login"])}}ngOnInit(){this.getAllReport()}getAllReport(t){t&&(this.currentpage=t);let e={startDate:i(this.selectedStartDate).format("DD-MM-YYYY"),endDate:i(this.selectedEndDate).format("DD-MM-YYYY")},c="";for(let r in e)e[r]&&(c=`${c}${r}=${e[r]}&`);this.ui.loader.show(),this.foodService.getAllReport(this.selectedPerPage,this.currentpage,c).subscribe(t=>{if(this.reportList=[],t.data){let e=JSON.parse(JSON.stringify(t.data.result)),c=e.map(t=>t.ingredient_id);console.log(c);for(let t=0;t<e.length;t++){let c=e.filter(c=>c.ingredient_id===e[t].ingredient_id);if(console.log(c),c.length>1){let t=JSON.parse(JSON.stringify(c[0])),e=0,r=0;for(let n=0;n<c.length;n++)e+=c[n].quantity_by_order,r+=c[n].quantity_by_stock;t.quantity_by_order=e,t.quantity_by_stock=r,this.reportList.some(e=>e.ingredient_id===t.ingredient_id)||this.reportList.push(Object.assign({},t))}else this.reportList.push(c[0])}this.totalPage=this.reportList.length}this.ui.loader.hide()},t=>{this.ui.loader.hide()})}onDateSelect(){this.selectedStartDate?this.selectedEndDate?this.getAllReport():a.a.fire({icon:"warning",title:"Please Select End Date",showConfirmButton:!1,timer:1500}):a.a.fire({icon:"warning",title:"Please Select Start Date",showConfirmButton:!1,timer:1500})}changeOrder(t){this.sortOrder=!this.sortOrder,this.field=t,this.sortFields[t]=this.sortOrder,this.reportList.sort((e,c)=>"quantity_by_order"===t||"quantity_by_stock"===t?this.sortOrder?c[t]-e[t]:e[t]-c[t]:this.sortOrder?c[t].localeCompare(e[t]):e[t].localeCompare(c[t]))}changedDate(t,e){"start"===t?this.selectedStartDate=e:"end"===t&&(this.selectedEndDate=e),console.log(this.selectedStartDate),console.log(this.selectedEndDate)}}return t.\u0275fac=function(e){return new(e||t)(s.Wb(n.e),s.Wb(l.a),s.Wb(d.a))},t.\u0275cmp=s.Qb({type:t,selectors:[["app-ingredient-report"]],viewQuery:function(t,e){var c;1&t&&s.Rc(u,!0),2&t&&s.Cc(c=s.lc())&&(e.closeEditModal=c.first)},decls:52,vars:21,consts:[[1,"container-fluid"],[1,"row","dash-tab"],[1,"col-sm-3","cus-srch"],[1,"form-group"],["type","date","id","birthday1","placeholder","From Date","name","selectedSDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["type","date","id","birthday2","placeholder","To Date","name","selectedEDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[1,"col-sm-3"],[1,"form-group","mt-3"],[1,"shortcut-btn","w-100",3,"click"],[1,"offset-md-1","col-sm-2","cus-srch"],["name","pay","id","pay",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","details_table"],["scope","col"],["href","javascript:void(0)",1,"caret-sort",3,"click"],[1,"fa"],["style","width:100%",4,"ngIf","ngIfElse"],["elseBlock",""],[2,"text-align","center",3,"pageChange"],[2,"width","100%"],[4,"ngFor","ngForOf"],["colspan","100%",1,"text-center"]],template:function(t,e){if(1&t&&(s.cc(0,"div",0),s.cc(1,"div",1),s.cc(2,"div",2),s.cc(3,"div",3),s.Mc(4," FROM DATE "),s.cc(5,"input",4),s.kc("ngModelChange",(function(t){return e.selectedStartDate=t}))("change",(function(t){return e.changedDate("start",t.target.value)})),s.bc(),s.bc(),s.bc(),s.cc(6,"div",2),s.cc(7,"div",3),s.Mc(8," TO DATE "),s.cc(9,"input",5),s.kc("ngModelChange",(function(t){return e.selectedEndDate=t}))("change",(function(t){return e.changedDate("end",t.target.value)})),s.bc(),s.bc(),s.bc(),s.cc(10,"div",6),s.cc(11,"div",7),s.cc(12,"button",8),s.kc("click",(function(){return e.onDateSelect()})),s.cc(13,"b"),s.Mc(14,"SEARCH"),s.bc(),s.bc(),s.bc(),s.bc(),s.cc(15,"div",9),s.cc(16,"div",3),s.Mc(17," SELECT PER PAGE "),s.cc(18,"select",10),s.kc("ngModelChange",(function(t){return e.selectedPerPage=t}))("change",(function(t){return e.onLimitSelect(t.target.value)})),s.cc(19,"option",11),s.Mc(20,"10"),s.bc(),s.cc(21,"option",12),s.Mc(22,"25"),s.bc(),s.cc(23,"option",13),s.Mc(24,"50"),s.bc(),s.cc(25,"option",14),s.Mc(26,"100"),s.bc(),s.bc(),s.bc(),s.bc(),s.cc(27,"div",15),s.cc(28,"div",16),s.cc(29,"table",17),s.cc(30,"thead"),s.cc(31,"tr"),s.cc(32,"th",18),s.Mc(33,"Ingredient Name"),s.cc(34,"a",19),s.kc("click",(function(){return e.changeOrder("ingredient")})),s.Xb(35,"i",20),s.bc(),s.bc(),s.cc(36,"th",18),s.Mc(37,"Category"),s.cc(38,"a",19),s.kc("click",(function(){return e.changeOrder("category")})),s.Xb(39,"i",20),s.bc(),s.bc(),s.cc(40,"th",18),s.Mc(41,"Stock out (By Stock Manager)"),s.cc(42,"a",19),s.kc("click",(function(){return e.changeOrder("quantity_by_stock")})),s.Xb(43,"i",20),s.bc(),s.bc(),s.cc(44,"th",18),s.Mc(45,"Stock out (By Order)"),s.cc(46,"a",19),s.kc("click",(function(){return e.changeOrder("quantity_by_order")})),s.Xb(47,"i",20),s.bc(),s.bc(),s.bc(),s.bc(),s.Kc(48,f,3,8,"tbody",21),s.Kc(49,y,4,1,"ng-template",null,22,s.Lc),s.bc(),s.cc(51,"pagination-controls",23),s.kc("pageChange",(function(t){return e.getAllReport(t)})),s.bc(),s.bc(),s.bc(),s.bc(),s.bc()),2&t){const t=s.Dc(50);s.Jb(5),s.vc("ngModel",e.selectedStartDate),s.Jb(4),s.vc("ngModel",e.selectedEndDate),s.Jb(9),s.vc("ngModel",e.selectedPerPage),s.Jb(17),s.Nb("fa-caret-down",e.sortFields.ingredient)("fa-caret-up",!e.sortFields.ingredient),s.Jb(4),s.Nb("fa-caret-down",e.sortFields.category)("fa-caret-up",!e.sortFields.category),s.Jb(4),s.Nb("fa-caret-down",e.sortFields.quantity_by_stock)("fa-caret-up",!e.sortFields.quantity_by_stock),s.Jb(4),s.Nb("fa-caret-down",e.sortFields.quantity_by_order)("fa-caret-up",!e.sortFields.quantity_by_order),s.Jb(1),s.vc("ngIf",null==e.reportList?null:e.reportList.length)("ngIfElse",t)}},directives:[g.b,g.h,g.k,g.p,g.l,g.r,r.l,b.c,r.k],pipes:[b.b,r.r],styles:[""]}),t})()}];let M=(()=>{class t{}return t.\u0275mod=s.Ub({type:t}),t.\u0275inj=s.Tb({factory:function(e){return new(e||t)},imports:[[n.h.forChild(m)],n.h]}),t})();c.d(e,"IngredientReportModule",(function(){return _}));let _=(()=>{class t{}return t.\u0275mod=s.Ub({type:t}),t.\u0275inj=s.Tb({factory:function(e){return new(e||t)},imports:[[r.b,M,g.d,b.a]]}),t})()}}]);